properties([
    parameters([
        choice (
            choices: ['','validate_files','docker-build','ec2-build','test_custom_scipt'],
            description: 'enter the job to run',
            name: 'Job_Type'
        ),
        choice (
            choices: ['','v1','v2', 'v3'],
            description: 'Choose your version',
            name: 'versions'
        )
    ])
])



pipeline {
    agent any

    stages {
        stage('validate') {
            when {
                expression { params.Job_Type == 'validate_files' }
            }
            steps {
                echo 'validating file..'
            }
        }
        stage('docker-build') {
            when {
                expression { params.Job_Type == 'docker-build' }
            }
            steps {
                sh '''

                echo 'building docker from docker file'
                cd sandeep &&
                docker build -t jenkins .

                '''
            }
        }
        stage('ec2-build') {
            when {
                expression { params.Job_Type == 'ec2-build' }
            }
            steps {
                sh '''
                
                echo 'describing ec2 instance....'
                cd santosh &&
                ls -ltr
                pwd
                sh buildec2.sh

                '''
            }
        }
        stage('custom_script') {
            when {
                expression { params.Job_Type == 'test_custom_scipt' }
            }
            steps {
                sh '''
                
                ssh -i "dev_workstation_1.pem" ec2-user@ec2-3-92-189-23.compute-1.amazonaws.com
                sudo suconfig.sh
                git clone <project-1>
                sh project_1/giriraj/config.sh
                               
                '''
            }
        }
    }
}
